var aivaDescriptionNode,copyAiSpecServer="https://shopify-app.copyaidev.ai";function hideDescriptionAiva(){let e="{{productDescriptionMain}}";e=e.replaceAll("&amp;","&");let t=document.getElementsByTagName("*");for(let i=0;i<t.length;i++){let a=t[i].innerText;if(null!=a&&(a=(a=a.replace(/(\r\n|\n|\r)/gm,"")).replaceAll('"',"'")),a==e){t[i].innerText="",aivaDescriptionNode=t[i];break}}}function showDimLoaderCopyAi(){let e=document.createElement("div");e.id="copyAidimDiv",e.style.background="rgba(0,0,0,.5)",e.style.position="fixed",e.style.top="0px",e.style.height="100%",e.style.width="100%",e.style.zIndex="1000",e.innerHTML="<p>Loading Preview</p>",document.body.append(e);let t=document.createElement("style");t.innerHTML=".aiSpecloader{border:6px solid #f3f3f3;border-radius:50%;border-top:6px solid grey;width:80px;height:80px;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}#copyAidimDiv p{position:relative;top:40%;width:100%;color:#fff;font-size:20px;text-align:center}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}",document.head.append(t);let i=document.createElement("div"),a=document.createElement("div");a.classList.add("aiSpecloader"),a.style.position="fixed",a.style.top="48%",a.style.left="47.5%",i.append(a),e.append(i)}function runAivaAiSpac(e){let t=new ApiAiSpacHandler,i=getProductHandleForAivaAiSpac(__st.pageurl);t.ajax_call("https://"+Shopify.shop+"/products/"+i+".js","GET",data=null,header=["application/json"],i=>{i=JSON.parse(i);var a="";t.ajax_call(copyAiSpecServer+"/dami-detais/"+e,"GET",data=null,header=["application/x-www-form-urlencoded"],e=>{e=JSON.parse(e),console.log(e),a=e.description,aivaDescriptionNode.innerHTML=a,document.getElementById("copyAidimDiv").remove()})})}function getProductHandleForAivaAiSpac(e){let t,i=e.match(/products\/(.*?)$/)[1],a=i.match(/\?([^&=]+)=([^&=]+)(?:&([^&=]+)=([^&=]+))*$/);return t=null==a?i:i.replace(a[0],"")}function aivaAiSpecReady(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}function getParameterByNameAivaCopyAi(e,t=window.location.href){e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}aivaAiSpecReady(function(){let e=getParameterByNameAivaCopyAi("copypreview"),t=getParameterByNameAivaCopyAi("shop"),i=getParameterByNameAivaCopyAi("load"),a=getParameterByNameAivaCopyAi("publish");"aispace"==e&&"yes"==i?(showDimLoaderCopyAi(),hideDescriptionAiva(),setTimeout(()=>{runAivaAiSpac(t)},4e3)):"aispace"==e?runAivaAiSpac(t):"yes"==a&&(hideDescriptionAiva(),runAivaAiSpac(t))});class ApiAiSpacHandler{ajax_call(e,t,i=null,a,n){let o=new XMLHttpRequest;if(!o)return!1;o.onreadystatechange=function(){if(4===this.readyState&&200===this.status){let e=this.responseText;n(e)}else 4==this.readyState&&this.status>400&&n("api error")},o.open(t,e,!0),o.setRequestHeader("Content-type",a),null!=i?o.send(i):o.send()}}